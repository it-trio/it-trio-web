---
import { Image } from "astro:assets";
import { SPOTIFY_SHOW_LINK, APPLE_PODCAST_SHOW_LINK, AMAZON_MUSIC_SHOW_LINK, YOUTUBE_MUSIC_SHOW_LINK, RSS_FEED_URL, YOUTUBE_SHOW_LINK } from "../consts";

interface Props {
  hideRSS?: boolean;
  spotifyEpisodeLink?: string;
  applePodcastEpisodeLink?: string;
  amazonMusicEpisodeLink?: string;
  youtubeMusicEpisodeLink?: string;
  youtubeEpisodeLink?: string;
}

const { hideRSS, spotifyEpisodeLink, applePodcastEpisodeLink, amazonMusicEpisodeLink, youtubeMusicEpisodeLink, youtubeEpisodeLink } = Astro.props;

// Use episode-specific links if available, otherwise fall back to channel links
const spotifyLink = spotifyEpisodeLink || SPOTIFY_SHOW_LINK;
const applePodcastLink = applePodcastEpisodeLink || APPLE_PODCAST_SHOW_LINK;
const amazonMusicLink = amazonMusicEpisodeLink || AMAZON_MUSIC_SHOW_LINK;
const youtubeMusicLink = youtubeMusicEpisodeLink || YOUTUBE_MUSIC_SHOW_LINK;
const youtubeLink = youtubeEpisodeLink || YOUTUBE_SHOW_LINK;
---

<div class="list">
  <a class="item" href={spotifyLink} target="_blank">
    <Image class="image" src="/listen-on-spotify.png" width={660} height={160} alt="Spotifyで「ITトリオの日常」を聴く" />
  </a>

  <a class="item" href={amazonMusicLink} target="_blank">
    <Image class="image" src="/listen-on-amazon-music.png" width={1374} height={334} alt="Amazon Music「ITトリオの日常」を聴く" />
  </a>
  <a class="item" href={applePodcastLink} target="_blank">
    <Image class="image" src="/listen-on-apple-podcast.svg" width={129.155} height={41} alt="Apple Podcastで「ITトリオの日常」を聴く" />
  </a>
  <a class="item youtube" href={youtubeLink} target="_blank">
    <Image class="image" src="/youtube.png" width={128} height={128} alt="YouTubeで「ITトリオの日常」を聴く" />
  </a>
  <a class="item" href={youtubeMusicLink} target="_blank">
    <Image class="image" src="/listen-on-youtube-music.png" width={505} height={136} alt="YouTube Musicで「ITトリオの日常」を聴く" />
  </a>
  {
    !hideRSS && (
      <a class="item rss" href={RSS_FEED_URL} target="_blank">
        <Image class="image" src="/rss.png" width={256} height={256} alt="「ITトリオの日常」のRSSフィード" />
      </a>
    )
  }
</div>

<style>
  .list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 12px;
    margin: 0;
    padding: 0;
  }
  .item {
    box-sizing: border-box;
    width: 120px;
    @media (max-width: 720px) {
      width: 80px;
    }

    &.youtube {
      width: 58px;
      @media (max-width: 720px) {
        width: 32px;
      }

      border-radius: 4px;
    }
  }
  .rss {
    display: block;
    width: 32px;
    height: 32px;
  }
  .image {
    display: block;
  }
</style>
